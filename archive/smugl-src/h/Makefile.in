# $Id: Makefile.in,v 1.8 1997/11/26 17:26:37 oliver Exp $
# Common rules for makefiles
#

# default rule:
all::	$(EXES)

# Programs
CC              = @CC@
CXX             = @CXX@
RANLIB          = @RANLIB@
PERL            = @PERL@
INSTALL         = @INSTALL@
INSTALL_PROGRAM = $(INSTALL)
INSTALL_DATA    = $(INSTALL)

prefix          = @prefix@
exec_prefix     = @exec_prefix@
bindir          = @bindir@
srcdir          = @top_srcdir@

INCDIR          = ../h
LIBDIR          = ../lib

SMUGLLIB        = $(srcdir)/lib/libsmugl.a

# In developer mode - use the following CFLAGS
CFLAGS          = @CFLAGS@ @DEFS@
CPPFLAGS        = @CPPFLAGS@
ALL_CFLAGS      = -I. -I$(INCDIR) $(CFLAGS)
LIBS            = -L$(LIBDIR) -lsmugl @LIBS@ @LDFLAGS@

# Tidy up rules
clean::
	rm -f *.o *.bak *~ core *.core *TAGS*
	@TAGS@ *.cc *.hpp

distclean: clean
	rm -f $(EXES) *.a *.status *.cache *.log Makefile Makefile.dep

# General rules
.cc.o::
	$(CXX) -c $(CPPFLAGS) $(ALL_CFLAGS) $<

tags::
	@TAGS@ *.cc

depend::
	$(CXX) $(CPPFLAGS) $(ALL_CFLAGS) -MM *.cc >Makefile.dep

# Stuff for dealing with version files
../h/$(VER).h: ../h/$(VER).rev
	@perl $(srcdir)/bin/mkrev -b $(srcdir)/h/$(VER)
	@touch $@
